{"componentChunkName":"component---src-templates-blog-post-js","path":"/随手记/bazel-学习笔记/","result":{"data":{"site":{"siteMetadata":{"title":"zyounan's blog","author":"zyounan","siteUrl":"https://zyounan.github.io","comment":{"disqusShortName":"","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"63064328-de4a-593e-b92d-31d881fa7a6e","excerpt":"官方文档的大致整理 :)","html":"<p>官方文档的大致整理 :)</p>\n<!-- separate -->\n<h3 id=\"一些基本概念和名词\" style=\"position:relative;\"><a href=\"#%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%90%8D%E8%AF%8D\" aria-label=\"一些基本概念和名词 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>一些基本概念和名词</h3>\n<h4 id=\"workspace\" style=\"position:relative;\"><a href=\"#workspace\" aria-label=\"workspace permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Workspace</h4>\n<p>拥有一个名为 <code class=\"language-text\">WORKSPACE</code> 文件的目录被称为 <code class=\"language-text\">workspace</code> 的根目录。根目录下的子目录如果拥有 <code class=\"language-text\">WORKSPACE</code> 则会被忽略。<code class=\"language-text\">WORKSPACE.bazel</code> 是别名，只不过优先级更高一些。</p>\n<h4 id=\"repositories\" style=\"position:relative;\"><a href=\"#repositories\" aria-label=\"repositories permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Repositories</h4>\n<p>包含 <code class=\"language-text\">WORKSPACE</code> 文件的目录是主仓库的根目录，也被缩写为 <code class=\"language-text\">@</code>。外部的仓库在 <code class=\"language-text\">WORKSPACE</code> 文件中定义。</p>\n<h4 id=\"packages\" style=\"position:relative;\"><a href=\"#packages\" aria-label=\"packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Packages</h4>\n<p>仓库中代码组织的基本单位是 <code class=\"language-text\">package</code>。包里面包含文件/外部依赖。\n包所在的目录应该包含一个名字是 <code class=\"language-text\">BUILD</code> 或者 <code class=\"language-text\">BUILD.bazel</code> 的文件。一个包包含了它的所有<strong>除含有 <code class=\"language-text\">BUILD(.bazel)</code> 的</strong>子目录。</p>\n<h4 id=\"targets\" style=\"position:relative;\"><a href=\"#targets\" aria-label=\"targets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Targets</h4>\n<p>所谓的 <code class=\"language-text\">package</code> （以下写成<em>包</em>）就是一个容器。包中的元素被称为 <code class=\"language-text\">targets</code>。<code class=\"language-text\">targets</code> 由<strong>文件</strong> 和 <strong>规则</strong> 组成，另外也有 <code class=\"language-text\">package groups</code>。</p>\n<ul>\n<li>文件被分为两类。一种是代码文件，一种是构造工具（例如 <code class=\"language-text\">Qt Moc</code>）生成的文件</li>\n<li>规则。处理输入，生成输出。规则的输出永远被看成生成的文件。规则的输入可能是代码文件，也可能包含其它的规则文件。</li>\n</ul>\n<h4 id=\"labels\" style=\"position:relative;\"><a href=\"#labels\" aria-label=\"labels permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Labels</h4>\n<p><code class=\"language-text\">Target</code> 的名字被称为 <code class=\"language-text\">label</code>（标签）。形式地来讲，</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">@myrepo//my/app/main:app_binary</code></pre></div>\n<ol>\n<li>如果标签引用的 <code class=\"language-text\">target</code> 在同一个仓库下面，仓库名 <code class=\"language-text\">@myrepo</code> 可以省略。</li>\n<li>标签由两个部分组成。由 <code class=\"language-text\">//</code> 打头，包名 (<code class=\"language-text\">my/app/main</code>) 和目标名 (<code class=\"language-text\">app_binary</code>)。如果冒号被省略了，那么就认为目标名和包名的最后一个部分(例子中的 <code class=\"language-text\">main</code>) 一致。</li>\n<li>\n<p>在一个 <code class=\"language-text\">BUILD</code> 规则中，以下形式是等价的</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">//my/app:app\n//my/app\n:app\napp</code></pre></div>\n</li>\n<li><code class=\"language-text\">BUILD</code> 规则中可以使用相对（包目录的）路径指向文件。但是如果在别的地方，例如命令行中，有 <code class=\"language-text\">//my/app:generate.cc</code>。</li>\n</ol>","frontmatter":{"title":"Bazel 学习笔记","date":"March 05, 2021"}}},"pageContext":{"slug":"/随手记/bazel-学习笔记/","previous":{"fields":{"slug":"/随手记/新博客/"},"frontmatter":{"title":"新博客","category":"随手记","draft":false}},"next":null}},"staticQueryHashes":["3128451518","52803243"]}